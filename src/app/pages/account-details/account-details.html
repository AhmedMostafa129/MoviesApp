<section class="account-section">
  <div class="container">
    <div class="account-wrapper">

      <!-- Left Side: Profile Header -->
      <div class="profile-card">
        <div class="profile-header">
          <div class="avatar-container" (click)="fileInput.click()"
            style="cursor: pointer; position: relative; display: inline-block;">
            <input #fileInput type="file" (change)="onFileSelected($event)" accept="image/*" style="display: none;">

            <div class="avatar-circle" *ngIf="!profileImage"
              style="width: 100px; height: 100px; line-height: 100px; font-size: 2.5rem; margin: 0 auto; position: relative;">
              {{ user()?.name?.charAt(0)?.toUpperCase() }}
              <div class="overlay"
                style="position: absolute; bottom: 0; right: 0; background: #e50914; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border: 2px solid #141414;">
                <i class="fas fa-camera" style="font-size: 0.8rem; color: white; line-height: 1;"></i>
              </div>
            </div>

            <img *ngIf="profileImage" [src]="profileImage" alt="Profile"
              style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid #e50914; box-shadow: 0 0 15px rgba(229, 9, 20, 0.4);">

            <div *ngIf="profileImage" class="overlay"
              style="position: absolute; bottom: 5px; right: 5px; background: #e50914; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border: 2px solid #141414;">
              <i class="fas fa-pen" style="font-size: 0.8rem; color: white;"></i>
            </div>
          </div>
          <h3>{{ user()?.name }}</h3>
          <p class="email-text">{{ user()?.email }}</p>
        </div>

        <div class="bio-preview" *ngIf="bio">
          <p>"{{ bio }}"</p>
        </div>

        <button class="btn-logout" (click)="logout()">
          <i class="fas fa-sign-out-alt"></i> Logout
        </button>
      </div>

      <!-- Right Side: Edit Form -->
      <div class="details-card">
        <div class="card-header">
          <h2>Account Details</h2>
          <p>Update your personal information</p>
        </div>

        <form (ngSubmit)="saveChanges()">
          <div class="row">
            <!-- Name -->
            <div class="col-md-6 form-group">
              <label>Full Name</label>
              <div class="input-with-icon">
                <i class="fas fa-user"></i>
                <input type="text" [(ngModel)]="name" name="name" required placeholder="Enter your name" />
              </div>
            </div>

            <!-- Email (Read Only) -->
            <div class="col-md-6 form-group">
              <label>Email Address</label>
              <div class="input-with-icon">
                <i class="fas fa-envelope"></i>
                <input type="email" [value]="user()?.email" disabled class="readonly" />
              </div>
            </div>
          </div>

          <div class="row">
            <!-- Phone -->
            <div class="col-md-6 form-group">
              <label>Phone Number</label>
              <div class="input-with-icon">
                <i class="fas fa-phone"></i>
                <input type="tel" [(ngModel)]="phone" name="phone" placeholder="+123 456 7890" />
              </div>
            </div>

            <!-- Address -->
            <div class="col-md-6 form-group">
              <label>Location</label>
              <div class="input-with-icon">
                <i class="fas fa-map-marker-alt"></i>
                <input type="text" [(ngModel)]="address" name="address" placeholder="City, Country" />
              </div>
            </div>
          </div>

          <!-- Bio -->
          <div class="form-group">
            <label>Bio</label>
            <div class="input-with-icon">
              <i class="fas fa-pen align-top"></i>
              <textarea [(ngModel)]="bio" name="bio" rows="3" placeholder="Tell us about yourself..."></textarea>
            </div>
          </div>

          <hr class="divider">

          <h4 class="security-title">Security</h4>

          <div class="row">
            <!-- Old Password -->
            <div class="col-md-6 form-group">
              <label>Current Password</label>
              <div class="password-field">
                <input [type]="showOldPassword ? 'text' : 'password'" [(ngModel)]="oldPassword" name="oldPassword"
                  placeholder="••••••••" />
                <i class="fas" [ngClass]="showOldPassword ? 'fa-eye-slash' : 'fa-eye'"
                  (click)="showOldPassword = !showOldPassword"></i>
              </div>
            </div>

            <!-- New Password -->
            <div class="col-md-6 form-group">
              <label>New Password</label>
              <div class="password-field">
                <input [type]="showNewPassword ? 'text' : 'password'" [(ngModel)]="newPassword" name="newPassword"
                  placeholder="Leave blank to keep current" />
                <i class="fas" [ngClass]="showNewPassword ? 'fa-eye-slash' : 'fa-eye'"
                  (click)="showNewPassword = !showNewPassword"></i>
              </div>
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-save">
              <i class="fas fa-save"></i> Save Changes
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>